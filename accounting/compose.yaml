services:
  db:
    build:
      context: ./docker/db
    container_name: db
    restart: unless-stopped
    ports:
      - "5432:5432"
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: postgres
      POSTGRES_APP_USER: accounting
      POSTGRES_APP_PASSWORD: accounting
  # S3 backup configuration (uncomment to enable)
  #   WALG_ENABLE: "true"
  #   WALG_S3_PREFIX: s3://your-bucket/db-accounting
  #   WALG_COMPRESSION_METHOD: zstd
  #   AWS_ACCESS_KEY_ID: your-access-key
  #   AWS_SECRET_ACCESS_KEY: your-secret-key
  #   AWS_ENDPOINT: https://storage.googleapis.com
  #   AWS_REGION: us-east-1
  #   AWS_S3_FORCE_PATH_STYLE: "true"
  stellar:
    image: stellar/quickstart
    container_name: stellar
    restart: unless-stopped
    ports:
      - "8000:8000"
    environment:
      NETWORK: local